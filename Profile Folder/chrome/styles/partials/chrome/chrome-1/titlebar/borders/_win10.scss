& {
	--titlebar-border-radius: 0;
	@media (-moz-platform: macos) {
		--titlebar-border-radius: 10px; //Artificial minimum radii set by macOS's window manager (+the 1px border)
	}
}

// Change offsets for Incognito/pfp when window's maximised
&[sizemode="maximized"],
&[sizemode="fullscreen"] {
	#fxa-toolbar-menu-button,
	#private-browsing-indicator-with-label {
		height: calc(var(--tab-height) - 9px);

		.toolbarbutton-badge-stack,
		.private-browsing-indicator-icon {
			margin-block-end: -4px; //offset for maximised window
		}
	}
}

&[gktitnative="false"] {
	@import "../tools/vanillatitlebar";
	--titlebar-box-shadow: none;
	//--bodytitlebar-pseudo-gap: 0px;

	// Visuals: Not Windows
	@media not (-moz-platform: windows) {
		//At this stage, the OS has no border, so for accuracy we add a Win10-styled border
		&[windowtype="navigator:browser"] > body {
			border: 1px solid AccentColor;
		}
		&:-moz-window-inactive[windowtype="navigator:browser"] > body {
			border-color: rgb(57,57,57); //Taken from Firefox's browser-aero.css
		}
		&[sizemode="maximized"],
		&[sizemode="fullscreen"] {
			&[windowtype="navigator:browser"] > body {
				border: 0;
			}
		}
	}

	// Visuals: Windows
	@media (-moz-platform: windows) {
		@media (-moz-windows-accent-color-in-titlebar) {
			//Taken from Firefox's browser-aero.css
			#navigator-toolbox {
				border-top: .5px solid AccentColor;
			}
			&:-moz-window-inactive #navigator-toolbox {
				border-color: rgb(57,57,57);
			}
			&[sizemode="maximized"],
			&[sizemode="fullscreen"] {
				#navigator-toolbox {
					border-top: 0;
				}
			}
		}
	}
}