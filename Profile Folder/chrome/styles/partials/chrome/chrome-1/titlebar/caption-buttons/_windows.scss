& {
	--titlebar-buttonbox-gap: 0px;

	--titlebar-button-border-radius: 0;
	--titlebar-button-border-radius-bigger: 5px;

	--titlebar-button-outer-border: 1px solid var(--titlebar-button-outer-border-color-normal);
	--titlebar-button-outer-border-color-normal: rgb(0, 0, 0, 0.35);
	--titlebar-button-inner-shadow-normal: inset 1px 1px 0px 0px rgba(255, 255, 255, 0.3);
	--titlebar-button-height: 17px;
	--titlebar-button-background-normal: transparent;
	--titlebar-button-background-hot: rgba(255, 255, 255, 0.3);
	--titlebar-button-background-active: rgba(255, 255, 255, 0.2);

	--titlebar-close-width: 43px;
	--titlebar-close-background-normal: var(--titlebar-button-background-normal);
	--titlebar-close-background-hot: rgb(217, 76, 74);
	--titlebar-close-background-active: rgb(213, 58, 63);
	--titlebar-close-glyph: url(chrome://userchrome/content/assets/img/chrome-1/titlebar/windows/close.svg);

	--titlebar-max-restore-width: 25px;
	--titlebar-max-restore-background-normal: var(--titlebar-close-background-normal);
	--titlebar-max-restore-background-hot: var(--titlebar-button-background-hot);
	--titlebar-max-restore-background-active: var(--titlebar-button-background-active);
	--titlebar-max-glyph: url(chrome://userchrome/content/assets/img/chrome-1/titlebar/windows/maximize.svg);
	--titlebar-restore-glyph: url(chrome://userchrome/content/assets/img/chrome-1/titlebar/windows/restore.svg);

	--titlebar-min-width: var(--titlebar-max-restore-width);
	--titlebar-min-background-normal: var(--titlebar-close-background-normal);
	--titlebar-min-background-hot: var(--titlebar-max-restore-background-hot);
	--titlebar-min-background-active: var(--titlebar-max-restore-background-active);
	--titlebar-min-glyph: url(chrome://userchrome/content/assets/img/chrome-1/titlebar/windows/minimize.svg);

	//&:not([customthememode="1"]) {
		&[lwtheme] {
			&:not([lwtheme-id*="firefox-compact"], [lwtheme-id*="compact-light"]) {
				&:not([lwtheme-id="#{$gtkplus}"]) {
					&[captionbuttonbackground="true"] {
						--titlebar-buttonbox-pseudo-background: var(--toolbar-bgcolor, var(--lwt-accent-color));
					}
				}
			}
		}
	//}
	&[lwtheme-id*="firefox-compact-light"][chrtheme="true"] {
		--titlebar-buttonbox-pseudo-background: var(--chrt-theme-window-control-background, var(--chrt-control-background, var(--chrt-button-background, transparent))) !important;
	}
}

&[sizemode="maximized"] {
	.titlebar-buttonbox-container {
		margin-block-start: 0 !important;
		margin-inline-end: 3px !important;
	}
}

.titlebar-buttonbox-container {
	margin: 0 !important;
	margin-block-start: -1px !important;
	margin-inline-end: 2px !important;

	@media (-moz-platform: linux) {
		margin-block-start: -2px !important;
		margin-inline-end: 1px !important;
	}
}

.titlebar-buttonbox {
	margin-right: 1px !important;
	box-shadow: 1px 1px 0px 0px rgba(255, 255, 255, 0.2);
	border-bottom-left-radius: 4px !important;
	border-bottom-right-radius: 4px !important;
}

.titlebar-button {
	image {
		opacity: .6 !important;
		transition: opacity 100ms linear;
	}

	&:hover {
		image {
			opacity: 1 !important;
		}
	}
}

.titlebar-close {
	border-right: var(--titlebar-button-outer-border) !important;
	border-bottom-right-radius: var(--titlebar-button-border-radius-bigger) !important;
}

.titlebar-max,
.titlebar-restore,
.titlebar-min {
	&:active {
		box-shadow: inset 1px 1px 0px 0px rgba(0, 0, 0, 0.2);
	}
}

.titlebar-close,
.titlebar-max,
.titlebar-restore,
.titlebar-min {
	border-left: var(--titlebar-button-outer-border) !important;
	border-bottom: var(--titlebar-button-outer-border) !important;
}

.titlebar-restore {
	.toolbarbutton-icon {
		transform: translateX(-1px);
	}
}

.titlebar-min {
	border-bottom-left-radius: 5px !important;
}