//NOTE: This border style ignores native titlebars

// Change offsets for Incognito/pfp when window's maximised
&[sizemode="maximized"],
&[sizemode="fullscreen"] {
	#fxa-toolbar-menu-button,
	#private-browsing-indicator-with-label {
		height: calc(var(--tab-height) - 9px);

		.toolbarbutton-badge-stack,
		.private-browsing-indicator-icon {
			margin-block-end: -4px; //offset for maximised window
		}
	}
}

& {
    --titlebar-border-radius: 3px;
	@media (-moz-platform: macos) {
		--titlebar-border-radius: 9px; //Artificial minimum radii set by macOS's window manager
	}
	--tab-distance-from-top: 10px;
	--tab-distance-from-top-maximised: 3px;
	
	@import "../../../chrome-1/titlebar/tools/vanillatitlebar";
	--titlebar-border-radii: var(--titlebar-border-radius) var(--titlebar-border-radius) 0 0;
	--titlebar-box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.3);
}

// Visuals
&[is117Plus][windowtype="navigator:browser"] > body {
	border: 1px solid rgba(0, 0, 0, 0.3);
}
#titlebar {
	box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.3);
}
// Use the custom titlebar background in Chromium OS's SysTheme
&[gksystheme="chromiumos"] {
	--default-titlebar-texture: #C3C3C4;
	--default-titlebar-texture-inactive: #CDCDCE;
	@media (prefers-color-scheme: dark) {
		--default-titlebar-texture: #3A3A3B;
		--default-titlebar-texture-inactive: #444446;
	}
	@media (-moz-platform: linux) {
		&[is117Plus]:not([geckium-fortyseven]) {
			--default-titlebar-texture: rgba(255, 255, 255, 0.2);
			--default-titlebar-texture-inactive: rgba(255, 255, 255, 0.2);
			@media (prefers-color-scheme: dark) {
				--default-titlebar-texture: rgba(0, 0, 0, 0.2);
				--default-titlebar-texture-inactive: rgba(0, 0, 0, 0.2);
			}
		}
	}
}

// Visuals: Maximised / Fullscreen
&[sizemode="maximized"],
&[sizemode="fullscreen"] {
	&[windowtype="navigator:browser"] > body {
		border: 0;
	}
	--titlebar-border-radius: 0;
	
	&[gksystheme="chromiumos"]:not([gkthemed], [gkchrthemed], [geckium-fortyseven]) #titlebar {
		background: black !important;
		color: white !important;
		box-shadow: unset;
	}
}